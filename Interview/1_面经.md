## 面试经历

## 快手 – 视频面试30分钟

- 谈一下项目
- 谈一下对IOC和AOP的理解
- Memchached 和 Redis 的区别
- Redis的持久化实现
- Redis的淘汰策略
- 定期删除和惰性删除的区别、优缺点
- IOC的原理是什么
- Hashmap的底层实现和原理
- 手写一个，实现map的put方法

## 百度 – 视频面试20分钟

- 说下spring事务，@Transition 这个注解在哪些情况下不会生效
- Synchronized 基本原理
- Synchronized和ReentrantLock 都是可重入锁，他们俩是怎么实现可重入的
- 线程池的工作原理和7个参数
- Volatile的用处
- JVM在什么情况下会发生YoungGC和FullGC
- Redis的淘汰机制
- 类加载机制说一下
- 快速排序的基本实现
- Mysql优化是怎么优化的，索引失效的情况都有哪些
- 实现一个抢红包的算法，怎么实现
- 让你实现一个LRU算法，怎么实现

## 搜狐一面 – 视频面试 50分钟

- JVM垃圾回收机制
- 怎么判断当前对象能否被回收
- 对象首次创建的话创建在哪个区（新生代还是老年代，新生代哪个区）
- 解释一下stop the world
- Stop the world 过程中，如果有新的垃圾产生怎么办
- 我说我们项目用的是JDK1.6，面试官就问，1.8和1.6都有哪些区别
- 有了解过1.8的stream流吗
- HashMap1.8和1.8之前的区别，以及底层实现
- HashMap为什么不是线程安全的
- HashMap还会造成什么问题（1.8之前头插法会导致死循环）
- 实现HashMap线程安全的有哪些（我答了三种）
- CurrentHashMap的底层原理，以及1.8和之前的区别
- 详细讲讲CAS的工作原理
- CAS的ABA问题怎么解决的
- 你常用的线程池有哪些
- 线程池的7个参数
- SingleThreadExecutor和CachedThreadPool为什么不推荐使用，会出现哪些问题
- 写一个冒泡排序
- 写一个算法，快乐数（LeetCode原题），我一开始用递归写，会出现死循环的状态，面试官超好提醒我，然后花了很长时间修改算法，通过
- Mybatis有了解它的插件吗
- MybatisTemplate 有了解吗
- Redis的五个参数
- Redis的事务，我Muliti事务开始，然后写了五个key，其中有一个失败了，Redis怎么处理的，会回滚吗
- Redis事务和Mybatis事务有什么区别
- Redis主从复制了解吗
- Redis主服务器是怎么给从服务器写入数据的
- 看你还了解Docker，（简单说了一下玩过一点点）

## 蚂蚁金服（支付宝）一面 – 视频面试 50分钟

- 聊了十多分钟做的项目
- 你们公司自研的Spring和市面上流行的Spring有什么不一样
- Redis主要用来干嘛的
- Redis的持久化方式
- Redis的事务有了解吗（我说了使用的基本命令和mybatis、mysql的区别）
- 你对你们经常使用的集合底层有了解吗
- HashMap的底层原理，1.8以及之前的，线程安全实现方式
- Sychonized和ReentrantLock 的区别
- Volatile的作用是什么
- 对JVM垃圾回收器有了解吗
- CMS垃圾回收器说一下工作原理
- 堆和栈的区别
- JVM的调优
- try{}catch{}finally{}中，如果finally{}中的返回值＋1，返回的是多少，会改变返回结果吗
- 线程池有了解吗，它的工作原理
- 固定长度的线程池有什么缺点
- Mysql和Oracle你用的最大的区别是什么（我说了两者的事务隔离级别，以及mysql中的Explain和oracle当中的Explain plan for的区别）
- Mysql的聚簇索引和非聚簇索引有了解吗
- 看你做过Sql优化，讲讲你做了哪些优化
- Mysql回表知道是什么吗
- SpringMVC的工作流程是什么
- 一道简单的算法题，反转链表，我说这题我前段时间专门leetcode上练过，我算法不好，这段时间主要是复习基础了，面试官夸我基础很扎实，应该二面稳了，面试体检极佳

## 蚂蚁金服（支付宝）二面 – 视频面试 40分钟

- 问了下我们公司现在项目用到的技术栈
- 和一面一样问了下我们公司自研的Spring有哪些不一样
- 同样讲了讲oracle和mysql的区别
- 讲讲不可重复读是什么
- Jdk1.8有了解过CompletableFuture吗（我没有了解过，流下来没技术的眼泪）
- 那你知道Future吗（好像是Callable的时候返回值会用到它，又流下了没技术的眼泪）
- 写一个算法题吧，牛客网的 密码合格校验，写了十多分钟，全是靠if else解决的
- 小姐姐也说，这个写的没问题，但是需要更多的考虑更好的办法，比如借助java自带的工具类等等。
- 说一些和技术无关的，你对你自己的技术发展有什么想法（我就说，平时会多看看技术公众号，看B站学习技术，会关注很多新技术然后跟着学习，想去更大的平台通过实际场景的应用丰富自己的阅历）

## 美团（美团打车）一面 – 视频面试 40分钟

- String，StringBuild，StringBuff的区别
- StringBuff为什么是线程安全的
- ArrayList和LinkedList的区别是什么
- 以上二位是线程安全的吗，怎么实现线程安全
- Vector实现线程安全的原理是什么
- 多线程编程中你知道哪些都是保证线程安全的
- Volatile的底层实现是什么
- 线程池了解吗，说说工作原理
- 内存溢出说一下
- 栈溢出说一下
- 要实现一个OOM和栈溢出，怎么实现
- 说一下你常用的垃圾回收器
- Stop the world 解释一下
- CMS的工作流程是什么
- Spring中bean的作用域
- Spring中bean的生命周期说一下
- 说一下你在项目中遇到的印象深刻的问题是什么，有什么收获
- Redis的持久化怎么实现的
- 写一道编程题，leetcode 第一道经典题目–两数之和
- 对美团打车有什么想了解的吗（问了下美团打车和滴滴高德打车的区别）

## 字节跳动 视频面试 – 30分钟

- 简单介绍了一下项目
- HashMap介绍一下
- 为什么要用红黑树的结构
- 红黑树一般都会用在哪些场景中
- Oracle的索引了解吗
- Mysql的索引底层实现是什么
- B+树的实现原理了解吗
- Mysql事务特性了解吗，具体说一说
- Mysql的事务隔离级别了解吗
- Mysql的事务隔离级别是怎么实现的
- 算法题：[(5,7),(1,6),(15,50),(60,90),(35,37)] 合并二元数组 输出[(1,7),(15,50),(60,90)]
- 算法题：分层打印二叉树
- 算法题：反转链表起网络

> 一般技术面到后面，面试官都是leader或者是部门老大，他们其实很关心你的职业规划、对待工作的态度、团队合作的能力、自我价值实现方面的思考，当然还有项目实现的能力，过往项目经验和深度。所以最好自己先想想怎么用简短的话表述清楚。注意围绕关键词去说。

## 美团

美团一面：

1、自我介绍

2、聊项目相关

- 介绍项目怎么保证 redis 与 Mysql 的数据一致性见你写了个加随机数预防缓存雪崩，解释一下未改进和改进后的 Jmter 测试性能对比

3、Redis

- 为什么选择 Redis 作为缓存？为什么 Redis 的性能十分的高？说一下单进程、单线程的 Redis 和你平时写的多线程程序的对比如何保证 Redis 的高可用？（哨兵、持久化策略 RDB、AOF）解释一下哨兵、RDB、AOF 主从一致性 Redis 数据淘汰策略能说一下分布式事务吗？setnx 是事务吗？

4、Mysql

- 解释一下事务讲一讲事务隔离级别为什么使用 B+树作为索引聚簇索引和非聚簇索引的区别

5、Java

- Java 是如何保证其安全性的刚见你说了 Java 内存泄漏问题，解释一下什么情况下会出现说一下 BIO、NIO、AIO

6、手撕算法

- 一个数组找出出现次数最多的一个数，如果多个数出现的次数相同则输出第一个生产者消费者（一对一）

7、其它

- 平时怎么学习的有什么需要问的吗？

美团二面：

1、手撕算法

- 10 个多线程保证 i 从 0 加到 10 （差点翻车，主线程忙等另外 10 个线程完结）反转链表上台阶（n=80)

2、操作系统

- 常用的 linux 命令说一下操作系统中的信号 和 信号量有什么关系 epoll 和 Selector 有什么区别？

3、计算机网络

- 说一下拥塞控制

4、数据结构

- 说一下红黑树，你平时用的技术哪里用到了它？哈希表怎么处理冲突？

5、项目相关

- 把项目放到服务器上运行的时候有没有遇到什么问题？查看项目运行的状态怎么做？spring 和 springboot 的关系你是怎么理解的？Spring IOC 和 AOP 说一下你的理解为什么用消息队列？对于消息的重复消费你有什么设计方案吗？

美团三面：

- 你怎么学的 Java 啊？设计模式了解吗？单例讲一下，懒汉饿汉 double-check，怎么实现。策略模式，外观模式，适配器模式，装饰器模式，分别讲一下联合索引什么时候不会触发索引？AOP 了解么，有什么好处，如何使用，怎么实现的?支付宝到银行的转账业务怎么实现？redis 实现分布式锁三台机器集群，按不同权重访问，怎么做？

美团四面（hr）：

- 先介绍一下你自己吧说一下四种 IO 模型平时怎么去学习的？为什么你说学习了要去实践？说一下的最大的优点和缺点举一下你缺点的例子想象一下你几十年后是怎样的生活？你觉得最痛苦的一段时间对你影响最大的一件事情在安排活动的过程中有没有发生什么冲突？你有什么崇拜的人吗？你有什么想问的

## 蘑菇街

- HashMap和ConcurrentHashMap的区别
- vector，list
- C++多态，虚函数机制
- 进程通信
- 进程线程差异
- TCP三次握手四次挥手细节
- 算法题：最长不重复字串（HashTable，O(N)）
- Java多态（看程序说结果，比较复杂，还考察了override和overwrite）
- 二叉搜索树
- B树b+树
- 红黑树删除算法
- 用互斥锁实现读写锁，写者优先
- 算法题：有100个方格，每个上面有毒蘑菇和体力蘑菇，毒蘑菇减体力体力蘑菇加体力，当前体力是能跳到的最远距离，求是否能跳到最远方格，如果可以，求落在第100格上的最大剩余体力
- 服务方法调用
- RPC/Netty
- 序列化/反序列化
- 10亿找Top10000，需要考虑分片，如果用最小堆需要考虑高效合并
- 要考虑等待时间且带有优先权的打印机，设计数据结构使打印任务高效
- 二十四点牌

## 每刻二面

1. 有没有JVM调优经验。
2. 讲一下GC
   题目：维护第三方服务的Token问题

包装服务。包装第三方服务给内部使用。Token会过期。因此如何维护这个Token。

## 鲸灵一面

- DDD如何有深入了解
- 基本类型和引用类型有什么区别
- JVM JMM相关
- 线程池相关
- 阻塞队列如何实现
- DDD好处
- 线上问题100%排查过程 详细。
- 强引用 弱引用 软引用
- GC相关

## 欢聚时代

- pulsar 优势 grpc优势    
- QPS 支持并发查询的最大数量，加缓存
- RT 每次查询的最大返回时间 并行查询解决（ 一个线程报错另外一个是否受影响）
- 线上问题解决方式(消息雪崩)
- 项目架构(DDD 多渠道商品的维护 流程引擎 最终一致性
- 系统设计(1E订阅 MapRuduce）
- 自己设计的组件(0 - 1 落地)

## 英佑

- 序列化 
- ThreadLocal数据结构 
- 死锁的产生和消除 
- mysql索引
-  SPI
-  Spring启动过程
-  Spring事务是怎么实现的 
- 声明式事务注解存在的问题 
- 簇集索引的数据结构 
- 什么情况下锁全表

## 恒生-21

40min

- 项目内使用哪些技术完成了什么

  shard JDBC MapperInterceptor#batchUpdateSelectiveById		DataSourceTransactionManager

- 为什么要设计缓存组件 和 spring cacheable提供的有什么不同 

  仓储层放回具体渠道类型的实体，存在返回范型的情况

- Redis高可用的相关 持久化

- kafka pulsar 区别  消息重复  消息的顺序消费

- MySQL高可用 分库分表 drds

## 熙牛-21

基础服务 

60min

- 项目20min
- CQRS的理解
- 引擎最终一致性如何实现
- 自定义的缓存组件
- AQS原理，实现方式
- Redis持久化
- Redis主从同步
- JVM内存模型
- volatile  happend-before
- 类加载机制相关问题 打破双亲委托机制
- pulsar 的优势   kafka 区别  
- 介绍一下 pulsar 存储和计算分离
- spring bean 的初始化流程
- 循环引用怎么解决 为什么是三级缓存
- 线上问题排查

## 熙牛二面-21

30min

- 项目
- 线上问题
- 营销价和价格中心模型
- rpc调用和服务发现细节
- 流程引擎细节，实现原理
- 私有方法能否被代理

## 安恒-19

- 项目15min
- 商品模型侵入价格模型问题
- pulsar 消息顺序性保证
- pulsar 消息查找

## 古茗-21

30min

- 商品模型以及项目演进
- 事务消息 
- 流程引擎细节
- binlog同步es 消息乱序

##讯盟-19

hashmap ConhashMap  JDK7和8的不同实现方式

AQS countdownlatch Reentrantlock

线程池的使用时出现的一些场景问题（业务线程池隔离）

线程池最大线程数和核心线程数过大或过小会出现什么问题

线上线程池监控和线程池参数的调优如何去做

线上JVM的启动参数都配了哪些

G1和CMS的各自的优缺点

G1回收过程

G1的停顿时间预测模型的实现原理

Redis的使用场景，为什么要用string存对象，不用hash

zset和list哪个更适合去存带有时间戳的价格

从产品角度谈spring和springboot 区别

springboot 依赖模块化、约定大于配置、starter SPI 和 @AutoConfiguration

Netty4 的线程模型演进

NIO 的buffer  selector channel

零拷贝的几种实现 （mmap 等）

mysql 常用的几种索引类型

线上的sql调优过程（发现问题 定位 解决）

DDD的一些实践（CQRS 领域实体和领域服务 仓储层）

三数之和

判断两个二叉树相等

## 要务

分布式理论

mybatis缓存

mybatis分页原理

es保证并发的读写

shardingjdbc分页原理

如何设计数据模型

redis高效的原因

redis线程模型

redis是多进程的吗

两个大集合取交集

redis和数据库的一致性

[数据库的高可用之道](https://zhuanlan.zhihu.com/p/91488488)

这个还会列举实际的mysql场景 和表子段 来让你根据查询语句建索引，复合索引

还有慢sql调优  索引失效场景 索引未命中期望索引

 starter 包依赖 问题

starter 读取配置文件 映射到对应配置类

starter 查看对应启动类 onClass

spring 如何读区配置文件

aop 事务失效

架构图！！

线上问题

future的设计

[线程池异常](https://zhuanlan.zhihu.com/p/136571068)



## UNKNOW

布隆过滤器解决redis穿透的问题

一致性hash算法 这个是基于项目问的

mysql优化 讲了索引优化 sql优化 分库分表 数据冷备

为什么用b+树不用b树，然后问b+树时间复杂度

然后grpc的通讯协议 序列化方式对比dubbo 有什么优劣势

spi机制

redis分布式锁	主从架构和哨兵机制

这个我不太熟悉 就讲了消息体压缩更小 减少网络开销 支持长连接什么的 追问这个我就答不出来了

mysql优化 隔离级别啥的

项目就问了数据量 然后问了分库分表，数据库分库分表可以讲讲 这一块讲的可以挺多的

比如先让介绍redis主从架构和哨兵机制

master节点挂了之后的流程 然后如果master节点挂了数据还没同步到slave，会造成数据丢失，怎么解决

然后就是哨兵监控 选举 通知的流程

就一步一步 先讲了一主多从 然后主从同步的流程 涉及到redis的aop 和rdb

然后节点挂了之后哨兵集群的选举方式 n/2 +1

然后redis分布式锁的nx ex

看门狗机制





## 

## 写给看到最后码友的话

> 这些算是我作为过来人对于应届毕业生和刚工作不久的同学的一些小小建议吧。

（1）一定要紧跟技术前进的脚步，尤其是大数据相关的技术，在技术更迭的时候一定要学习熟悉新技术，看源码，哪怕自己在工作中用不到也一定要学。因为这是你下一份工作的敲门砖。

我作为一个老兵，在上一家公司工作4年，我没有逼迫自己学习新技术。

结果现在面试碰壁，其实大部分原因就是人家用的都是主流技术，你不会你就被淘汰。

（2）不要给自己设置舒适区，这个就是说，一个公司待久了不要懒惰，不能荒废自己，始终要保持清醒的头脑和进取心，不断学习，不断完善自己的技术，架构设计能力，项目管理能力，交付能力等。

一定要及时从项目中总结经验和不足，最好落实到日记本中，最后通过不断思考，形成自己的做事方法论。

（3）对自己的职业生涯要有一个规划，以后要做哪一块一定要有自己的想法，确定了就要从这个方向完善自己，多学多练。

目前大数据这一块，有数据中台架构的公司不是很多，除了算法岗外，大多数人在团队中都是1专多能的角色，今天干干ETL，明天搞数仓，后天又给BI出数据，可能又搞调度系统、报表系统、标签系统、反作弊平台等平台。

没有人会专一做某一块，但是自己一定要想好哪一块是自己以后要走的方向，那么这一个方向确定了就要深入的学习这一块的知识，多看源码，多做练习，如果接触到具体项目，要在项目中沉淀自己，最后形成自己的知识体系。

（4）做事情要有担当，不要根据OKR给自己设置界限，有能力有空闲多做一定要多做，这也是别人认可你的最佳途径之一。互联网圈子很小，大家认可你，以后去大厂，换个好工作，也许就更容易。